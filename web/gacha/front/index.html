<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>gacha</title>
</head>
<body>
    <form id="gacha">
        <input type="submit" value="1回ガチャる！" />
    </form>
<script>
    function gacha() {
        const seeds = Math.floor(Math.random() * (100000007  + 1)) + 10;
        const url = "http://34.82.49.144:3334";
        console.log(url);

        return fetch(url, {
            method: 'POST',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                seed: seeds,
            })
        })
        .then(res => {
            console.log(res);
            alert(res);
            return res;
        })
    }

    document.getElementById("gacha").onsubmit = function(e) {
        gacha()
        .then(res => {
            console.log(res);
            alert(res);
        })
        .catch(err => {
            console.log(err);
            alert('failed gacha:' + err);
        })
    }
</script>
</body>
</html>